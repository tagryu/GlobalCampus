---
description: 
globs: 
alwaysApply: false
---
# Next.js 14 App Router Development Rules

ì´ í”„ë¡œì íŠ¸ëŠ” Next.js 14 App Routerë¥¼ ì‚¬ìš©í•˜ëŠ” TypeScript ê¸°ë°˜ì˜ í˜„ëŒ€ì ì¸ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì…ë‹ˆë‹¤.

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

### í•µì‹¬ ì„¤ì • íŒŒì¼
- [next.config.ts](mdc:next.config.ts) - Next.js ì„¤ì •
- [tailwind.config.ts](mdc:tailwind.config.ts) - Tailwind CSS ì„¤ì •  
- [tsconfig.json](mdc:tsconfig.json) - TypeScript ì„¤ì •
- [package.json](mdc:package.json) - ì˜ì¡´ì„± ë° ìŠ¤í¬ë¦½íŠ¸

### App Router êµ¬ì¡°
- [src/app/layout.tsx](mdc:src/app/layout.tsx) - ë£¨íŠ¸ ë ˆì´ì•„ì›ƒ
- [src/app/page.tsx](mdc:src/app/page.tsx) - í™ˆí˜ì´ì§€
- [src/app/globals.css](mdc:src/app/globals.css) - ê¸€ë¡œë²Œ ìŠ¤íƒ€ì¼

### ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°
- [src/components/layout/Navbar.tsx](mdc:src/components/layout/Navbar.tsx) - ë„¤ë¹„ê²Œì´ì…˜ ë°”
- [src/components/](mdc:src/components) - ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì»´í¬ë„ŒíŠ¸
- [src/hooks/](mdc:src/hooks) - Custom React Hooks
- [src/lib/](mdc:src/lib) - ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
- [src/types/](mdc:src/types) - TypeScript íƒ€ì… ì •ì˜

## ğŸ¯ ê°œë°œ ê°€ì´ë“œë¼ì¸

### 1. App Router íŒŒì¼ ì»¨ë²¤ì…˜
```
app/
â”œâ”€â”€ page.tsx          # í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸
â”œâ”€â”€ layout.tsx        # ë ˆì´ì•„ì›ƒ ì»´í¬ë„ŒíŠ¸
â”œâ”€â”€ loading.tsx       # ë¡œë”© UI
â”œâ”€â”€ error.tsx         # ì—ëŸ¬ UI
â”œâ”€â”€ not-found.tsx     # 404 í˜ì´ì§€
â””â”€â”€ route.ts          # API ë¼ìš°íŠ¸
```

### 2. Server vs Client Components
- **ê¸°ë³¸ì ìœ¼ë¡œ Server Components ì‚¬ìš©**
- `'use client'` ì§€ì‹œì–´ëŠ” í•„ìš”í•œ ê²½ìš°ì—ë§Œ ì‚¬ìš©:
  - ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ê°€ í•„ìš”í•œ ê²½ìš°
  - useState, useEffect ë“± React hooks ì‚¬ìš©
  - ë¸Œë¼ìš°ì € ì „ìš© API ì‚¬ìš©
  - ì‹¤ì‹œê°„ ìƒí˜¸ì‘ìš©ì´ í•„ìš”í•œ ê²½ìš°

### 3. ë¼ìš°íŒ… íŒ¨í„´
```
app/
â”œâ”€â”€ posts/
â”‚   â”œâ”€â”€ page.tsx           # /posts
â”‚   â”œâ”€â”€ [id]/
â”‚   â”‚   â””â”€â”€ page.tsx       # /posts/[id]
â”‚   â””â”€â”€ create/
â”‚       â””â”€â”€ page.tsx       # /posts/create
â”œâ”€â”€ (auth)/
â”‚   â”œâ”€â”€ login/
â”‚   â”‚   â””â”€â”€ page.tsx       # /login (ê·¸ë£¹ ë¼ìš°íŒ…)
â”‚   â””â”€â”€ signup/
â”‚       â””â”€â”€ page.tsx       # /signup
```

### 4. ë©”íƒ€ë°ì´í„° ê´€ë¦¬
```typescript
// Static metadata
export const metadata: Metadata = {
  title: 'Page Title',
  description: 'Page description'
}

// Dynamic metadata
export async function generateMetadata({ params }): Promise<Metadata> {
  return {
    title: `Dynamic Title - ${params.id}`,
  }
}
```

### 5. ë°ì´í„° í˜ì¹­ íŒ¨í„´
```typescript
// Server Componentì—ì„œ ì§ì ‘ fetch
async function getData() {
  const res = await fetch('https://api.example.com/data', {
    cache: 'force-cache' // ìºì‹± ì „ëµ
  })
  return res.json()
}

// Client Componentì—ì„œ useEffect + useState ë˜ëŠ” SWR/React Query ì‚¬ìš©
```

### 6. TypeScript íƒ€ì… ê´€ë¦¬
- [src/types/index.ts](mdc:src/types/index.ts)ì—ì„œ ê³µí†µ íƒ€ì… ì •ì˜
- ê° ê¸°ëŠ¥ë³„ë¡œ namespace ë˜ëŠ” ëª¨ë“ˆ ë¶„ë¦¬
- API ì‘ë‹µ íƒ€ì…ê³¼ UI ìƒíƒœ íƒ€ì… ë¶„ë¦¬

### 7. Tailwind CSS ì‚¬ìš©ë²•
- Utility-first ì ‘ê·¼ ë°©ì‹
- [src/lib/utils.ts](mdc:src/lib/utils.ts)ì˜ `cn()` í•¨ìˆ˜ë¡œ ì¡°ê±´ë¶€ í´ë˜ìŠ¤ ê´€ë¦¬
- ì»´í¬ë„ŒíŠ¸ë³„ ìŠ¤íƒ€ì¼ ë¶„ë¦¬ ì§€ì–‘, ìœ í‹¸ë¦¬í‹° í´ë˜ìŠ¤ í™œìš©

### 8. ì—ëŸ¬ ì²˜ë¦¬
```typescript
// error.tsx
'use client'
 
export default function Error({
  error,
  reset,
}: {
  error: Error & { digest?: string }
  reset: () => void
}) {
  return (
    <div>
      <h2>Something went wrong!</h2>
      <button onClick={() => reset()}>Try again</button>
    </div>
  )
}
```

### 9. ë¡œë”© ìƒíƒœ ê´€ë¦¬
```typescript
// loading.tsx
export default function Loading() {
  return <div>Loading...</div>
}

// Suspense í™œìš©
<Suspense fallback={<Loading />}>
  <SlowComponent />
</Suspense>
```

## ğŸ”§ ì„±ëŠ¥ ìµœì í™”

### 1. ì´ë¯¸ì§€ ìµœì í™”
```typescript
import Image from 'next/image'

<Image
  src="/profile.jpg"
  alt="Profile"
  width={500}
  height={300}
  priority // LCP ì´ë¯¸ì§€ì˜ ê²½ìš°
/>
```

### 2. í°íŠ¸ ìµœì í™”
```typescript
import { Inter } from 'next/font/google'

const inter = Inter({
  subsets: ['latin'],
  display: 'swap',
})
```

### 3. ë™ì  import
```typescript
const DynamicComponent = dynamic(() => import('./Component'), {
  loading: () => <p>Loading...</p>,
})
```

## ğŸš€ ë°°í¬ ìµœì í™”

### 1. í™˜ê²½ ë³€ìˆ˜ ê´€ë¦¬
- `.env.local` - ë¡œì»¬ ê°œë°œìš©
- `.env.production` - í”„ë¡œë•ì…˜ìš©
- í´ë¼ì´ì–¸íŠ¸ ë…¸ì¶œ ë³€ìˆ˜ëŠ” `NEXT_PUBLIC_` ì ‘ë‘ì‚¬ ì‚¬ìš©

### 2. ë¹Œë“œ ìµœì í™”
```bash
npm run build    # í”„ë¡œë•ì…˜ ë¹Œë“œ
npm run start    # í”„ë¡œë•ì…˜ ì„œë²„ ì‹¤í–‰
npm run lint     # ESLint ê²€ì‚¬
```

### 3. Vercel ë°°í¬ ì„¤ì •
- [vercel.json](mdc:vercel.json) ì„¤ì • íŒŒì¼ (í•„ìš”ì‹œ)
- í™˜ê²½ ë³€ìˆ˜ Vercel ëŒ€ì‹œë³´ë“œì—ì„œ ì„¤ì •

## ğŸ¨ UI/UX ê°€ì´ë“œë¼ì¸

### 1. ë°˜ì‘í˜• ë””ìì¸
```typescript
// Tailwind breakpoints
sm: '640px'   // Mobile
md: '768px'   // Tablet  
lg: '1024px'  // Desktop
xl: '1280px'  // Large Desktop
```

### 2. ì ‘ê·¼ì„± (a11y)
- semantic HTML íƒœê·¸ ì‚¬ìš©
- alt í…ìŠ¤íŠ¸ ì œê³µ
- í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜ ì§€ì›
- ARIA ì†ì„± ì ì ˆíˆ ì‚¬ìš©

### 3. ë‹¤êµ­ì–´ ì§€ì› ì¤€ë¹„
- í…ìŠ¤íŠ¸ í•˜ë“œì½”ë”© ì§€ì–‘
- i18n ë¼ì´ë¸ŒëŸ¬ë¦¬ í™œìš© ì¤€ë¹„

## ğŸ” ë³´ì•ˆ ê°€ì´ë“œë¼ì¸

### 1. í™˜ê²½ ë³€ìˆ˜ ë³´ì•ˆ
- ë¯¼ê°í•œ ì •ë³´ëŠ” ì„œë²„ ì‚¬ì´ë“œì—ì„œë§Œ ì ‘ê·¼
- API í‚¤ëŠ” `NEXT_PUBLIC_` ì ‘ë‘ì‚¬ ì‚¬ìš© ê¸ˆì§€

### 2. API ë¼ìš°íŠ¸ ë³´ì•ˆ
```typescript
// app/api/posts/route.ts
export async function POST(request: Request) {
  // ì¸ì¦ í™•ì¸
  // ì…ë ¥ ê°’ ê²€ì¦
  // ì‘ë‹µ ë°ì´í„° í•„í„°ë§
}
```

ì´ ê·œì¹™ë“¤ì„ ë”°ë¼ ê°œë°œí•˜ë©´ í˜„ëŒ€ì ì´ê³  í™•ì¥ ê°€ëŠ¥í•œ Next.js ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ì¶•í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
